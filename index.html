<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Over-caffeinated and Overlooked</title>
  <link rel="icon" href="logo.png" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="" />
  <meta property="og:url" content="https://github.com/thomastaoli/article-23/" />
  <meta property="og:image" content="https://github.com/thomastaoli/article-23/headerbg.png" />
  <meta property="og:description" content="The rise of caffeine-related health issues show there is a growing
      demand for stricter labeling laws to prevent further tragedies and
      ensure public safety. The FDA, however, is doing nothing." />
  <meta property="article:author" content="Thomas Li" />

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet" />
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text&display=swap" rel="stylesheet" />

  <!-- Include the D3.js library from 2.html -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <!--Mapbox-->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.5.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.5.1/mapbox-gl.js"></script>

  <!-- Styles from 2.html -->
  <style>
    body {
      margin: 0;
      font-size: 20px;
      font-family: "Nunito", sans-serif;
      /* Nunito as a fallback for Avenir */
      text-rendering: optimizeLegibility;
      background: #F3F3F3;
      color: #808080;
    }

    .byline {
      font-size: 1.1rem;
      line-height: 0.75;
      margin-top: 1.5rem;
      font-weight: 500;
    }

    .date {
      font-size: 0.85rem;
      line-height: 1;
      margin-top: 10px;
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .content {
      max-width: 640px;
      margin: auto;
    }

    .header-container {
      max-width: 1200px;
      margin: auto;
    }

    .header {
      padding: 3em 0;
    }

    a {
      color: #f05349;
    }

    .footer {
      background: #f4f4f4;
      text-align: center;
      font-size: 0.8em;
      margin-top: 4em;
      padding: 4em 0;
    }

    figure {
      margin: 0;
      padding-bottom: 1.2em;
    }

    figcaption {
      font-size: 0.8em;
      text-align: center;
      margin-top: 0.5em;
      color: #666;
    }

    h1 {
      font-family: "DM Serif Text", serif;
      font-weight: bold;
      font-size: 3em;
      line-height: 1;
      color: #9b9b9b;
    }

    h2 {
      font-family: "DM Serif Text", serif;
      font-weight: bold;
      font-size: 1.3em;
      line-height: 1;
      color: #9b9b9b;
    }

    .hr-lines {
      position: relative;
      max-width: 800px;
      margin: auto;
      text-align: center;
      font-family: "DM Serif Text", serif;
      font-size: 35px;
      font-weight: 600;
    }

    .subhead {
      font-family: "Nunito", sans-serif;
      text-align: center;
    }

    iframe,
    img,
    video {
      max-width: 100%;
    }

    p {
      line-height: 1.6;
      margin: 0;
      padding-bottom: 1.2em;
    }

    ul {
      margin: 0;
      padding-bottom: 1em;
      line-height: 1.6;
    }

    iframe {
      padding-bottom: 1.2em;
    }

    code {
      font-family: "Courier New", monospace;
      background: #fff880;
    }

    /* margin on mobile */
    @media (max-width: 640px) {
      body {
        font-size: 18px;
      }

      .content {
        padding-left: 0.5em;
        padding-right: 0.5em;
      }

      .header-container {
        padding-left: 0.5em;
        padding-right: 0.5em;
      }
    }

    svg {
      width: 100%;
      height: auto;
      /* Adjust the height based on the width while maintaining aspect ratio */
    }

    .portrait {
      float: center;
      /* Position the portrait to the left */
      width: 80px;
      /* Adjust the width as needed */
      height: 80px;
      /* Adjust the height as needed */
      border-radius: 50%;
      /* Make the portrait round */
      margin-right: 15px;
      /* Add some space between the portrait and the text */
      object-fit: cover;
      /* Ensure the image covers the area without distortion */
    }

    /* Styles from 2.html */
    .visualization-wrapper {
      background-color: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin: 20px auto;
      max-width: 800px;
      text-align: center;
      width: 800px;
      /* Fixed width */
      height: 300px;
      /* Fixed height */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .visualization-headline {
      margin-bottom: 20px;
      font-size: 24px;
      font-weight: bold;
      color: #333;
    }

    .visualization-container {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      height: 100%;
      /* Ensure it takes the full height of the wrapper */
    }

    .arrow {
      cursor: pointer;
      font-size: 50px;
      margin: 0 20px;
    }

    .item {
      display: flex;
      align-items: center;
    }

    .item img,
    .item .coffee-cup {
      height: 150px;
      /* Fixed height for images */
      width: auto;
      /* Maintain aspect ratio */
    }

    .drink-details {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 20px;
      margin-left: 20px;
    }

    .equal-sign {
      font-size: 50px;
      margin: 0 20px;
    }

    .vending-machine-wrapper {
      background-color: white;
      border-radius: 15px;
      padding: 40px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin: 20px auto;
      max-width: 800px;
      text-align: center;
      width: 800px;
      height: 650px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .vending-machine-headline {
      margin-bottom: 20px;
      font-size: 24px;
      font-weight: bold;
      color: #333;
    }

    .vending-machine {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      height: 100%;
    }

    .viz-section {
      margin: 20px auto;
      padding: 20px;
      border-radius: 10px;
      background-color: #f9f9f9;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      max-width: 800px;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .viz-section select,
    .viz-section button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
    }

    .drink-list-container {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 20px;
      width: 100%;
    }

    .viz-section ul {
      list-style-type: none;
      padding: 0;
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .viz-section li {
      margin: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 1 0 21%;
      /* Adjusts to 4 images per row */
    }

    .viz-section img {
      height: 100px;
      /* Adjust size as needed */
      cursor: pointer;
    }

    .selected-drinks img {
      height: 50px;
      margin-right: 10px;
    }

    .selected-drinks li {
      margin: 5px 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #map-story {
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 20px;
      display: flex;
      height: 600px;
      /* Adjust based on your content */
      max-width: 80%;
      /* Making the container narrower */
      margin: auto;
      /* Center the container */
    }

    .text-content {
      overflow-y: scroll;
      height: 100%;
    }

    .text-content h3 {
      padding-top: 20px;
    }

    .text-content p {
      padding: 10px;
      border-left: 3px solid #ccc;
      margin: 10px 0;
    }

    .map-container {
      height: 100%;
    }

    #map {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <div class="header-container">
    <div class="header" style="text-align: center">
      <h1>Over-caffeinated and Overlooked</h1>
      <h2 class="subhead" style="font-family: 'DM Serif Text', serif; font-weight: normal">
        The rise of caffeine-related health issues show there is a growing
        demand for stricter labeling laws to prevent further tragedies and
        ensure public safety. The FDA, however, is doing nothing.
      </h2>
    </div>
  </div>

  <div style="text-align: center">
    <img src="header.png" style="width: 40%; text-align: center" />
  </div>

  <div style="text-align: center">
    <p class="byline">
      By <a href="https://thomastaoli.github.io/">Thomas Li</a>
    </p>
    <p class="date">Jul 10, 2024</p>
  </div>

  <div class="content">
    <p>
      Sarah Katz was a promising student: she was doing her degree in
      international relations at UPenn, and had received a full scholarship
      from a Chinese university to study Mandarin - as it’s what she was
      passionate about.
    </p>
    <p>
      Her dreams, however, came to a tragic end after a fatal heart attack -
      which was triggered by a lemonade from Panera Bread.
    </p>
    <p>
      The beverage, according to a court file, contained 390 milligrams of
      caffeine - almost the daily maximum suggested by FDA for healthy adults.
      The fast food chain, though, didn’t put any label warning Katz, who had
      a heart condition since childhood, that the drink could be dangerous.
    </p>
    <p>
      Sarah’s death is an example of the fatal consequences that can arise
      from this lack of awareness and labeling. However, she’s not the last
      victim of Panera’s unlabelled caffeinated drink. At least two other
      alleged cardiac arrest cases were reported before the restaurant chain
      stopped selling the lemonade under the pressure of lawsuits.
    </p>
  </div>

  <h2 class="hr-lines" style="margin-top: 30px; margin-bottom: 10px">
    - The Hidden Danger -
  </h2>

  </br>

  <div class="content">
    <p>
      The tragic case of Sarah Katz underscores the dangers of unrecognized caffeine intake. As additional victims have
      come forward, it shows a pattern of risk associated with unlabelled caffeine content - while coffee is universally
      recognized for its caffeine content, many consumers are unaware that non-coffee beverages can also contain
      significant amounts.
    </p>
  </div>

  </br>

  <div class="visualization-wrapper">
    <h3 class="visualization-headline" style="font-family: DM Serif Text, serif;">How much caffeine is in common
      non-coffee beverages?</h3>
    <div class="visualization-container">
      <div id="left-arrow" class="arrow">&#8592;</div>
      <div id="visualization" class="item"></div>
      <div id="right-arrow" class="arrow">&#8594;</div>
    </div>
    <h3 class="visualization-headline" style="font-size: 15px;">*Calculation based on Starbucks Americano (12 oz, Hot)
    </h3>
  </div>

  </br>

  <div class="content">
    <p>
      Dr. Jon Kole, who published a <a href="https://pubmed.ncbi.nlm.nih.gov/24761278/">study</a>
      calling for comprehensive labeling, emphasizing the dangers of high caffeine
      intake: “This can lead to increased blood pressure and heart rate, or even cardiac arrest, which can be more
      dangerous for some vulnerable groups, such as pregnant women and adolescents.”
    </p>
    <p>
      Kole did the research for a reason. As a pediatrician, he had witnessed cases in which children were sent to ER
      with a racing heart from energy drinks. But the potential danger doesn't stop there.
    </p>
    <p>
      “Many people assume there’s some caffeine in energy drinks, but the labels often don't provide meaningful
      information on the amount,” said Kole. “This lack of standardized practice makes it difficult to gauge caffeine
      content across various product sizes, from large cans to small shooters. There are also unexpected sources like
      caffeine-infused snacks, and even some medications that people might not realize contain caffeine.”
    </p>
    <p>
      Kole did the research for a reason. As a pediatrician, he had witnessed cases in which children were sent to ER
      with a racing heart from energy drinks. While there’s no way to confirm the exact number of every year, how many
      people in the US suffer from the health risks or even die because of overdosing caffeine, a <a
        href="https://www.heartrhythmjournal.com/article/S1547-5271(24)00189-9/fulltext">recent study</a> conducted
      by the Mayo Clinic shows some alarming findings. The research, which delved into over 5,000 patient records,
      identified a concerning pattern where 5% of sudden cardiac arrest survivors had consumed energy drinks shortly
      before their cardiac events.
    </p>
    <p>
      Notably, the study highlighted cases where individuals with predispositions to heart issues such as Long QT
      Syndrome - which possibly took Katz’s life - experienced life-threatening arrhythmias triggered by these highly
      caffeinated beverages.
    </p>
  </div>

  <h2 class="hr-lines" style="margin-top: 50px; margin-bottom: 10px">
    - A Regulatory Gap -
  </h2>

  </br>

  <div class="content">
    <p>
      Current guidelines on caffeine labeling required by Food and Drug Administration (FDA) is that caffeine must be
      listed as an ingredient only if it is added to a product artificially. While there is a daily recommended limit of
      400mg for healthy adults,the total amount of caffeine, whether added or naturally occurring, does not need to be
      disclosed on food and beverage labels. This omission applies even if a product contains substantial amounts of
      caffeine, as is common in energy drinks and certain sodas.
    </p>
  </div>

  <div class="viz-section">
    <h3 class="visualization-headline" style="font-family: DM Serif Text, serif;font-size: 24px">The Caffeine Vending
      Machine</h3>
    <p class="visualization-headline" style="font-family: DM Serif Text, serif;font-size: 20px">See how much caffeine
      you'll consume</p>
    <div>
      <label for="brand-select">Brand:</label>
      <select id="brand-select">
        <option value="">All Brands</option>
      </select>

      <label for="type-select">Type:</label>
      <select id="type-select">
        <option value="">All Types</option>
      </select>
    </div>
    <div class="drink-list-container">
      <ul id="drink-list"></ul>
    </div>
    <h3 style="font-size: 18px">Selected Drinks</h3>
    <div>
      <ul id="selected-drinks" class="selected-drinks"></ul>
    </div>
    <button id="clear-selection">Clear Selection</button>
    <button id="calculate-caffeine">Calculate Total Caffeine</button>
    <div>
      <p>Total Caffeine: <span id="total-caffeine">0</span> mg</p>
    </div>
  </div>

  <div class="content">
    <p>
      “There's definitely no requirement for caffeine content labeling on things like soft drinks or bottled coffee
      beverages,” said Eva Greenthal, who oversees federal food labeling work at the Center for Science in the Public
      Interest. “For products that come with labels, while there is some testing for accuracy done at USDA and FDA,
      those agencies have limited resources so they're not able to test the accuracy of every single product.”
    </p>
    <p>
      The FDA’s stance is that consumers should know that products like coffee and tea naturally contain caffeine, but
      there is no requirement to inform consumers about the specific quantity, unless the caffeine is directly added as
      a separate ingredient. This regulatory gap can lead to consumers unknowingly ingesting high levels of caffeine,
      particularly from products where the caffeine content isn't obvious, thus posing potential health risks to
      individuals sensitive to or advised to limit their caffeine intake.
    </p>
    <p>
      Recent legal battles further illuminate the hazards posed by misleading caffeine labeling and lack of regulation.
      In the case of T.K. v. Prime Hydration LLC et al., the beverage company faced allegations of targeting minors with
      high-caffeine drinks without adequate warnings, capitalizing on celebrity endorsements to appeal to younger
      audiences.
    </p>
    <p>
      “Prime Hydration LLC and its founders engaged in deceptive marketing practices by promoting these high-caffeine
      drinks as healthy lifestyle choices without adequate warnings about their potential dangers,"said the plaintiff's
      attorney.
    </p>
    <p>
      “These drinks contain undisclosed amounts of caffeine and other stimulants that are not fully regulated, posing
      significant risks to consumers, especially those unaware of their potential side effects.”
    </p>
  </div>

  <h2 class="hr-lines" style="margin-top: 30px; margin-bottom: 10px">
    - Global Perspectives on Caffeine Regulation -
  </h2>

  </br>

  <div class="content">
    <p>
      While the United States continues to debate the need for stricter caffeine labeling laws, other countries have
      already implemented comprehensive regulations to ensure consumer safety and transparency. These international
      standards provide valuable insights into how caffeine regulation can be effectively managed.
    </p>
  </div>

  </br>

  <div id="map-story" style="display: flex; justify-content: space-between; width: 80%; margin: auto;">
    <div class="text-content" style="width: 50%;">
      <h2 id="Taiwan">Taiwan</h2>
      <p>In Taiwan, caffeine regulation and labeling are tightly controlled to ensure consumer safety and transparency.
        <a
          href="https://www.foodlabel.org.tw/FdaFrontEndApp/Law/Edit?SystemId=6d6b70d5-079f-417a-a85b-dbac15a03a09&clPublishStatus=1">The
          Ministry of Health and Welfare</a> mandates that prepackaged beverages containing caffeine must clearly label
        the caffeine content per 100 milliliters. Beverages with more than 20 milligrams of caffeine per 100 milliliters
        must explicitly state the caffeine content on their packaging. If the caffeine content is below this threshold,
        a label indicating "less than 20mg/100mL" is required. Products containing 2 milligrams or less per 100
        milliliters can be labeled as "low caffeine"
      </p>
      <div style="position: relative; margin-top: 20px;">
        <img src="taiwan-1.jpeg" style="width: 100%;" />
        <div class="annotation" style="top: 10%; left: 5%; font-style: italic;font-size: 18px;">A café menu in Taiwan
          with color-coded
          caffeine levels.</div>
      </div>
      <p>
        In addition to these requirements regarding packaged beverages, Taiwan uses a color-coded system for freshly
        brewed coffee to help consumers
        quickly assess caffeine levels. Red indicates a caffeine content above 200 milligrams per serving, yellow for
        100-200 milligrams, and green for less than 100 milligrams. This system allows consumers to make informed
        choices about their caffeine intake, catering to different health needs and preferences.
      </p>
      <h2 id="Canada">Canada</h2>
      <p>In Canada, the regulation and labeling of caffeine in foods and beverages are overseen by Health Canada, which
        has established guidelines to ensure consumer safety and transparency. Prepackaged foods containing caffeine
        must list all ingredients, including caffeine, in descending order by weight. For beverages that combine added
        caffeine with naturally caffeinated ingredients like guarana or yerba mate, the total caffeine content must be
        declared.​</p>
      <div style="position: relative; margin-top: 20px;">
        <img src="canada-1.jpeg" style="width: 100%;" />
        <div class="annotation" style="top: 10%; left: 5%; font-style: italic;font-size: 20px;">Red Bull sold in Canada
          with
          supplemented food labels.</div>
      </div>
      <p>
        Caffeinated energy drinks, which can contain up to <a href
          - "https://www.canada.ca/en/health-canada/services/food-nutrition/supplemented-foods/list-permitted-food-ingredients.html">180
          milligrams </a>of caffeine per serving, are subject to
        stringent labeling requirements. These products must include cautionary statements advising consumers about the
        recommended limits on caffeine intake and warning specific groups—such as children under 14, pregnant or
        breastfeeding women, and individuals sensitive to caffeine—to avoid these drinks.
      </p>
      <div style="position: relative; margin-top: 20px;">
        <img src="canada-2.jpeg" style="width: 100%;" />
        <div class="annotation" style="top: 10%; left: 5%; font-style: italic; font-size: 18px;">How nutrition facts of
          supplemented food
          should be displayed in Canada.</div>
      </div>
      <p>
        Additionally, the new <a
          href="https://www.canada.ca/en/health-canada/services/food-nutrition/legislation-guidelines/guidance-documents/supplemented-foods-regulations.html">
          supplemented foods regulations</a> mandate that any caffeinated beverages exceeding certain
        caffeine levels must carry a "High caffeine content" warning on their labels. Supplemented foods, which include
        products fortified with vitamins, minerals, amino acids, or other substances, are also required to clearly list
        the amounts of these added substances.
      </p>
      <h2 id="EU">European Union</h2>
      <p>In the European Union, the regulation and labeling of caffeine in food and beverages are governed by
        comprehensive guidelines to ensure consumer safety and informed decision-making. The key regulation, <a
          href="https://www.fao.org/faolex/results/details/en/c/LEX-FAOC128444/#:~:text=This%20Regulation%20provides%20the%20basis,market%20of%20the%20European%20Union.">No
          1169/2011</a> mandates that any prepackaged food or beverage containing caffeine must clearly state its
        presence in the ingredients list. If the caffeine content exceeds 150 mg per liter, the product must include the
        warning “High caffeine content. Not recommended for children or pregnant or breastfeeding women” followed by the
        actual caffeine content per 100 ml, ensuring consumers are aware of the potential risks associated with high
        caffeine
        intake.</p>
      <p>
        Additionally, energy drinks and other high-caffeine products must adhere to stringent labeling requirements. The
        European Food Safety Authority (EFSA) has conducted <a
          href="https://www.efsa.europa.eu/sites/default/files/corporate_publications/files/efsaexplainscaffeine150527.pdf">risk
          assessments</a> to determine safe caffeine consumption
        levels. While the recommendation for healthy adults align with FDA's 400 mg of caffeine per day, the recommended
        limit for pregnant and breastfeeding women is set at 200 mg per day.
      </p>
    </div>
    <div class="map-container" style="width: 50%;">
      <div id="map"></div>
    </div>
  </div>

  <br>

  <div class="content">
    <p>
      Greenthal sees the positive impact of stricter labeling regulations on consumer health and safety:"What we really
      see is changes to purchasing and diet quality. While it's hard to link any specific policy to biomarker and health
      outcomes, changes in what types of foods people are buying we can understand as important public health
      advances."
    </p>
  </div>


  <script src='https://api.mapbox.com/mapbox-gl-js/v3.5.1/mapbox-gl.js'></script>

  <script src="app.js"></script>



  <script>
    document.addEventListener("DOMContentLoaded", function () {
      let previousEntry = null;
      mapboxgl.accessToken = 'pk.eyJ1IjoibGl0YW90aG9tYXNsZWUiLCJhIjoiY2xwenc4eTEzMHc1cjJtbnAwY2Q5cXNoNiJ9.uFOrpSKa1zzLG3MDoQ8BOg'; // Ensure this is your valid token
      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/litaothomaslee/clyyresri019901p93m24h6xf',
        center: [120.9605, 22.6978], // Initial center position
        zoom: 5, // Initial zoom level
        pitch: 30
      });

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Update map based on the active country
            let country = entry.target.id;
            switch (country) {
              case 'Taiwan':
                map.flyTo({ center: [120.9673, 23.22], zoom: 7, speed: 0.7 });
                break;
              case 'Canada':
                map.flyTo({ center: [-102.3468, 63.1304], zoom: 3, speed: 0.7 });
                break;
              case 'EU':
                map.flyTo({ center: [10.4515, 51.1657], zoom: 4, speed: 0.7 });
                break;
            }

            // Change the color of the previous paragraph
            if (previousEntry && previousEntry.target.nextElementSibling) {
              previousEntry.target.nextElementSibling.style.color = 'lightgray';
            }
            if (entry.target.nextElementSibling) {
              entry.target.nextElementSibling.style.color = '#808080'; // Reset color of current paragraph
            }

            // Update the previousEntry reference
            previousEntry = entry;
          }
        });
      }, {
        root: null,
        rootMargin: '10% 0px 0px 0px', // Adjust top margin to trigger before the title reaches the top
        threshold: 0.99 // Adjusting the threshold to ensure it is almost fully visible
      });

      document.querySelectorAll('.text-content h2').forEach(title => {
        observer.observe(title);
      });
    });
  </script>

  <script>
    const data = [
      {
        drink: "Monster Energy 16 oz",
        caffeine: 160,
        equivalent: 1.066667,
        pic_link:
          "https://www.caffeineinformer.com/wp-content/caffeine/monster.jpg",
      },
      {
        drink: "Celsius Energy Drink 12 oz",
        caffeine: 200,
        equivalent: 1.333333333,
        pic_link:
          "https://www.caffeineinformer.com/wp-content/caffeine/celsius-energy-drink.jpg",
      },
      {
        drink: "C4 Smart Energy Drink 16 oz",
        caffeine: 200,
        equivalent: 1.333333333,
        pic_link:
          "https://www.caffeineinformer.com/wp-content/caffeine/c4-smart-energy.jpg",
      },
      {
        drink: "Bang Energy 16 oz",
        caffeine: 300,
        equivalent: 2,
        pic_link:
          "https://www.caffeineinformer.com/wp-content/caffeine/bang-energy-drink.jpg",
      },
      {
        drink: "Panera Charged Lemonade 30 oz",
        caffeine: 160,
        equivalent: 1.066667,
        pic_link:
          "https://www.caffeineinformer.com/wp-content/caffeine/charged-lemonade.jpg",
      },
      {
        drink: "Mountain Dew 12 oz",
        caffeine: 54,
        equivalent: 0.36,
        pic_link:
          "https://www.caffeineinformer.com/wp-content/caffeine/mountain-dew.jpg",
      },
    ];

    const coffeeCupImages = {
      0.1: "0.1.png",
      0.3: "0.3.png",
      1: "1.png",
      1.3: "1.3.png",
      2: "2.png",
      2.5: "2.5.png",
    };

    let currentIndex = 0;

    const container = d3.select("#visualization");

    function updateVisualization(index) {
      container.html(""); // Clear previous content

      const item = data[index];

      // Create a div for drink details
      const drinkDetails = container
        .append("div")
        .attr("class", "drink-details");

      drinkDetails.append("img").attr("src", item.pic_link);
      drinkDetails.append("div").text(item.drink);
      drinkDetails.append("div").text(`Total Caffeine: ${item.caffeine} mg`);

      container.append("div").attr("class", "equal-sign").text("≈");

      const equivalentCups = Math.round(item.equivalent * 10) / 10;
      let coffeeImage;
      if (equivalentCups <= 0.1) {
        coffeeImage = coffeeCupImages["0.1"];
      } else if (equivalentCups <= 0.3) {
        coffeeImage = coffeeCupImages["0.3"];
      } else if (equivalentCups <= 1) {
        coffeeImage = coffeeCupImages["1"];
      } else if (equivalentCups <= 1.3) {
        coffeeImage = coffeeCupImages["1.3"];
      } else if (equivalentCups <= 2) {
        coffeeImage = coffeeCupImages["2"];
      } else {
        coffeeImage = coffeeCupImages["2.5"];
      }

      container
        .append("img")
        .attr("src", coffeeImage)
        .attr("class", "coffee-cup");
    }

    d3.select("#left-arrow").on("click", () => {
      currentIndex = (currentIndex - 1 + data.length) % data.length;
      updateVisualization(currentIndex);
    });

    d3.select("#right-arrow").on("click", () => {
      currentIndex = (currentIndex + 1) % data.length;
      updateVisualization(currentIndex);
    });

    // Initial render
    updateVisualization(currentIndex);
  </script>

  <div class="content" style="text-align: center">
    <a href="https://thomastaoli.github.io/portfolio.html">Back to my portfolio page</a>
  </div>
  <br />

</body>

</html>